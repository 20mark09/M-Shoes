<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout</title>
<link rel="stylesheet" href="checkoutstyle.css">
</head>
<body class="">
<div class="container">

<button id="langBtn">English/ عربي</button>
<h1 class="en" style="display: block; text-align: center;">Checkout</h1>
<h1 class="ar rtl" style="display: none;">الدفع</h1>



<form id="checkoutForm">
  <label class="en" for="name" style="display: block;">Full Name</label>
  <label class="ar rtl" for="name" style="display: none;">الاسم الكامل</label>
  <input type="text" id="name" required="">

  <label class="en" for="phone" style="display: block;">Phone Number</label>
  <label class="ar rtl" for="phone" style="display: none;">رقم الهاتف</label>
  <input type="text" id="phone" required="">

  <label class="en" for="address" style="display: block;">Address</label>
  <label class="ar rtl" for="address" style="display: none;">العنوان</label>
  <textarea id="address" rows="2" required=""></textarea>

  <label class="en" for="city" style="display: block;">City</label>
  <label class="ar rtl" for="city" style="display: none;">المدينة</label>
  <input type="text" id="city" required="">

  <label class="en" for="governorate" style="display: block;">Governorate</label>
  <label class="ar rtl" for="governorate" style="display: none;">المحافظة</label>
  <select id="governorate" required="">
    <option value="Cairo">Cairo / القاهرة</option>
    <option value="Giza">Giza / الجيزة</option>
    <option value="Alexandria">Alexandria / الإسكندرية</option>
    <option value="Dakahlia">Dakahlia / الدقهلية</option>
    <option value="Red Sea">Red Sea / البحر الأحمر</option>
    <option value="Beheira">Beheira / البحيرة</option>
    <option value="Fayoum">Fayoum / الفيوم</option>
    <option value="Gharbia">Gharbia / الغربية</option>
    <option value="Ismailia">Ismailia / الإسماعيلية</option>
    <option value="Menofia">Menofia / المنوفية</option>
    <option value="Minya">Minya / المنيا</option>
    <option value="Qaliubiya">Qaliubiya / القليوبية</option>
    <option value="New Valley">New Valley / الوادي الجديد</option>
    <option value="Suez">Suez / السويس</option>
    <option value="Aswan">Aswan / أسوان</option>
    <option value="Assiut">Assiut / أسيوط</option>
    <option value="Beni Suef">Beni Suef / بني سويف</option>
    <option value="Port Said">Port Said / بورسعيد</option>
    <option value="Damietta">Damietta / دمياط</option>
    <option value="Sharkia">Sharkia / الشرقية</option>
    <option value="South Sinai">South Sinai / جنوب سيناء</option>
    <option value="North Sinai" disabled="">North Sinai (Not in coverage) / شمال سيناء (خارج التغطية)</option>
    <option value="Kafr El Sheikh">Kafr El Sheikh / كفر الشيخ</option>
    <option value="Luxor">Luxor / الأقصر</option>
    <option value="Qena">Qena / قنا</option>
    <option value="Sohag">Sohag / سوهاج</option>
    <option value="Matrouh">Matrouh / مطروح</option>
    <option value="Red Sea Coast">Red Sea Coast / ساحل البحر الأحمر</option>
  </select>

  <label class="en" for="payment" style="display: block;">Payment Method</label>
  <label class="ar rtl" for="payment" style="display: none;">طريقة الدفع</label>
  <select id="payment" required="">
    <option value="COD">Cash on Delivery / الدفع عند الاستلام</option>
    <option value="InstaPay">InstaPay / InstaPay</option>
  </select>

  <div class="order-summary">
  <h3 class="en" style="display: block;">Order Summary</h3>
  <h3 class="ar rtl" style="display: none;">ملخص الطلب</h3>

  <div id="summaryItems"></div>

  <div class="summary-total">
    <span class="en" style="display: block;">Total:</span>
    <span class="ar rtl" style="display: none;">الإجمالي:</span>
    $<span id="summaryTotal">0</span>
  </div>
</div><button type="button" id="whatsappBtn">Send Order via WhatsApp / إرسال الطلب عبر واتساب</button>
</form>
</div>
<script>
let isArabic = false;
const langBtn = document.getElementById('langBtn');
langBtn.addEventListener('click', () => {
  isArabic = !isArabic;
  document.querySelectorAll('.en').forEach(el=>el.style.display=isArabic?'none':'block');
  document.querySelectorAll('.ar').forEach(el=>el.style.display=isArabic?'block':'none');
  document.body.classList.toggle('rtl', isArabic);
});

function renderSummary() {
    const cart = JSON.parse(localStorage.getItem('cartForCheckout') || '[]');
    const container = document.getElementById('summaryItems');
    const totalEl = document.getElementById('summaryTotal');

    container.innerHTML = '';
    let total = 0;

    cart.forEach(item => {
        total += item.price * item.qty;

        container.innerHTML += `
            <div class="summary-item">
                <span>${item.name} (${item.color}, ${item.size}) x${item.qty}</span>
                <span>$${item.price * item.qty}</span>
            </div>
        `;
    });

    totalEl.innerText = total;
}

renderSummary();


document.getElementById('whatsappBtn').addEventListener('click', () => {
    const order = {
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        address: document.getElementById('address').value,
        city: document.getElementById('city').value,
        governorate: document.getElementById('governorate').value,
        payment: document.getElementById('payment').value,
        cart: JSON.parse(localStorage.getItem('cartForCheckout') || '[]')
    };

    if (!order.name || !order.phone || !order.address) {
        alert(isArabic?'الرجاء ملء جميع الحقول المطلوبة':'Please fill in all required fields');
        return;
    }

    const items = order.cart.map(i => `${i.name} x${i.qty} - $${i.price * i.qty}`).join('%0A');
    const message = `New Order:%0AName: ${order.name}%0APhone: ${order.phone}%0AAddress: ${order.address}, ${order.city}, ${order.governorate}%0APayment: ${order.payment}%0AItems:%0A${items}%0ATotal: $${order.cart.reduce((a,b)=>a+b.price*b.qty,0)}`;

    const whatsappLink = `https://wa.me/+201556761228?text=${message}`;
    window.open(whatsappLink, '_blank');

    localStorage.removeItem('cartForCheckout');
    localStorage.removeItem('cart');
});
</script>




</body>
</html>
